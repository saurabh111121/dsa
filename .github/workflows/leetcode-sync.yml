# ============================================================
# LeetCode → GitHub Sync
# ============================================================
# Uses: https://github.com/joshcai/leetcode-sync
#
# REQUIRED SECRETS (add in: Settings → Secrets → Actions):
#   LEETCODE_SESSION  – value of the `LEETCODE_SESSION` cookie
#                       from your logged-in browser session on
#                       leetcode.com  (DevTools → Application
#                       → Cookies → leetcode.com)
#   CSRFTOKEN         – value of the `csrftoken` cookie from
#                       the same browser session
#
# Solutions are committed to:  ProblemSolving/LeetCode/
# ============================================================

name: LeetCode Sync

on:
  # Run automatically every day at 01:00 UTC
  schedule:
    - cron: '0 1 * * *'

  # Allow manual trigger from the Actions tab
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    name: Sync LeetCode Submissions

    permissions:
      contents: write   # required to push commits

    steps:
      # ── 1. Checkout ────────────────────────────────────────
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          # Fetch full history so the action can detect
          # already-synced submissions and skip them
          fetch-depth: 0

      # ── 2. Sync ────────────────────────────────────────────
      - name: Sync LeetCode solutions to GitHub
        uses: joshcai/leetcode-sync@v1.7
        with:
          github-token:      ${{ github.token }}
          leetcode-session:  ${{ secrets.LEETCODE_SESSION }}
          csrf-token:        ${{ secrets.CSRFTOKEN }}

          # Destination folder inside the repo
          destination-folder: ProblemSolving/LeetCode

          # Commit message prefix
          commit-header: 'feat(leetcode): sync accepted submissions'

          # Only sync the most recent accepted submission per problem
          # Set to 'true' to sync ALL submissions (accepted + wrong)
          filter-duplicate-submissions: true
